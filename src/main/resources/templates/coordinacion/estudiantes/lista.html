<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/_layout :: content(titulo='Gestión de Estudiantes', content=~{::content})}">

<th:block th:fragment="content">
    <div class="container-fluid">
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800">Gestión de Estudiantes</h1>
            <a th:href="@{/coordinacion/estudiantes/nuevo}" class="btn btn-primary btn-sm shadow-sm">
                <i class="fas fa-plus fa-sm text-white-50"></i> Nuevo Estudiante
            </a>
        </div>

        <!-- Alertas -->
        <div th:if="${mensaje}" class="alert alert-dismissible fade show" th:classappend="'alert-' + ${tipoMensaje}" role="alert">
            <span th:text="${mensaje}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Formulario de Búsqueda -->
        <div class="card shadow mb-4">
            <div class="card-body">
                <form th:action="@{/coordinacion/estudiantes}" method="get" class="row g-3 align-items-center">
                    <div class="col-auto">
                        <label for="buscar" class="visually-hidden">Buscar</label>
                        <input type="text" class="form-control" id="buscar" name="buscar" th:value="${buscar}" placeholder="Nombre, documento...">
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-info">Buscar</button>
                        <a th:href="@{/coordinacion/estudiantes}" class="btn btn-secondary">Limpiar</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tabla de Estudiantes -->
        <div class="card shadow mb-4">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover" width="100%" cellspacing="0">
                        <thead class="table-dark">
                            <tr>
                                <th>Nombre Completo</th>
                                <th>Documento</th>
                                <th>Programa</th>
                                <th>Correo Electrónico</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="est : ${estudiantes}">
                                <td th:text="${est.getNombreCompleto()}"></td>
                                <td th:text="${est.numeroDocumento}"></td>
                                <td th:text="${est.programa}"></td>
                                <td th:text="${est.correoElectronico}"></td>
                                <td>
                                    <a th:href="@{/coordinacion/estudiantes/detalle/{id}(id=${est.id})}" class="btn btn-sm btn-info" title="Ver Detalle"><i class="fas fa-eye"></i></a>
                                    <a th:href="@{/coordinacion/estudiantes/editar/{id}(id=${est.id})}" class="btn btn-sm btn-warning" title="Editar"><i class="fas fa-edit"></i></a>
                                    <a th:href="@{/coordinacion/estudiantes/eliminar/{id}(id=${est.id})}" class="btn btn-sm btn-danger" title="Eliminar" onclick="return confirm('¿Estás seguro de que deseas eliminar este estudiante?');"><i class="fas fa-trash"></i></a>
                                </td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(estudiantes)}">
                                <td colspan="5" class="text-center">No se encontraron estudiantes.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</th:block>
</html>
